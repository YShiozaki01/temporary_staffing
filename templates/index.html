{% extends "layout.html" %}

{% block body %}

    <form action="/register" id="form" method="post">
        <input type="text" name="year" size="6" placeholder="--請求年--">年
        <input type="text" name="month" size="6" placeholder="--請求月--">月
        <p>
            <select name="department" class="select1">
                {% for department in send_dict["department_list"] %}
                <option value={{ department["コード"] }}>{{ department["名称"] }}</option>
                {% endfor %}
            </select>
        </p>
        <p>
            <select name="vendor" class="select2">
                {% for vendor in send_dict["vendor_list"] %}
                <option value={{ vendor["コード"] }}>{{ vendor["名称"] }}</option>
                {% endfor %}
            </select>
        </p>
        <button id="button" type="button">送信</button>
    </form>
  
    <script>
        const form = document.querySelector("#form")
        // const submitButton = document.querySelector("#button")
        const select1 = document.querySelector(".select1")

        // submitButton.onclick = function () {
        select1.onchange = function () {
            const formData = new FormData(form)
            const action = form.getAttribute("action")
            const options = {
                method: 'POST',
                body: formData,
            }

            fetch(action, options).then(function (e) {
                  return
                }
            )
        }

      </script>
        
{% endblock %}